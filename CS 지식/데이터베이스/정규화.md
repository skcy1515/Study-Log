# 정규화의 개념
릴레이션 스키마를 잘못 설계할 때의 문제점: 불필요한 데이터 중복이 발생하여, 이상 현상(릴레이션에 대한 데이터 삽입·수정·삭제 연산 수행할 때 발생할 수 있는 부작용) 발생

정규화(normalization): 이상 현상을 제거하면서 릴레이션 스키마를 올바르게 설계해 나가는 과정

## 이상현상
관계형 데이터베이스 스키마가 잘못 설계되었을 때 나타날 수 있는 부작용
- 삽입 이상(insertion anomaly): 투플 삽입(insert)시, 불필요한 데이터를 함께 저장해야만 투플 삽입이 가능한 현상
- 수정 이상(update anomaly, 갱신 이상): 데이터 수정(update)시, 중복된 데이터의 일부만 수정되어 데이터의 불일치 문제가 발생하는 현상
- 삭제 이상(deletion anomaly): 투플 삭제(delete)시, 다른 필요한 정보까지 함께 삭제되는 데이터 손실의 문제

### 삽입 이상
투플 삽입(insert)시, 불필요한 데이터를 함께 저장해야만 투플 삽입이 가능한 현상

예: 
  - 새로운 고객 (아이디 : melon, 이름 : 성원용, 등급:gold) 추가할 때, 불필요한 가짜 이벤트번호 데이터를 함께 저장해야 함

![pixelcut-export](https://github.com/user-attachments/assets/3ac5d21e-1e9d-43fc-979f-206fb9bafd86)

### 수정 이상
데이터 수정(update)시, 중복된 데이터의 일부만 수정되어 데이터의 불일치 문제가 발생하는 현상

예:
  - “apple” 고객 등급을 “gold”에서 “vip”로 변경
  - “apple”고객 등급의 일부 데이터만 수정
  - “apple” 고객의 등급 데이터 불일치 문제 발생

![pixelcut-export (1)](https://github.com/user-attachments/assets/fcf56199-59c2-4c0c-805e-3df5a59b69b9)

### 삭제 이상
투플 삭제(delete)시, 다른 필요한 정보까지 함께 삭제되는 데이터 손실의 문제

예:
  - “orange” 고객이 이벤트 참여 취소
  - 관련 투플 삭제
  - 필요 정보인 “orange”고객의 정보(고객아이디, 고객이름, 등급)까지 함께 삭제되어, 데이터 손실

![pixelcut-export (2)](https://github.com/user-attachments/assets/58b28de8-d2d3-4d4b-bd9c-c445d1f787bd)

## 정규화의 필요성
이상현상이 발생하는 이유: 관련 없는 속성들을 하나의 릴레이션에 모아두고 있기 때문

정규화: 이상 현상이 발생하지 않도록, 릴레이션을 관련 있는 속성들로만 구성하기 위해 릴레이션을 분해하는 과정

함수적 종속성을 판단하여 정규화를 수행함

# 함수적 종속성
X와 Y를 임의의 속성들의 집합이라고 할 때, X의 값이 Y의 값을 유일하게(unique) 결정(X의 값에 대해 반드시 한 개의 Y값이 대응)한다면 “X는 Y를 함수적으로 결정한다”라고 함

X → Y로 표기하고, “Y는 X에 함수적으로 종속된다” 혹은 “X는 Y의 결정자” 혹은 “X는 Y를 결정한다.” 혹은 “Y는 X에의해 결정된다” 라고 함

예: 고객 릴레이션
  - 각 고객아이디 속성 값에 대응되는 고객이름 속성과 등급속성 값이 단 하나 존재함
  - 고객아이디가 고객이름과 등급 결정
  - 고객아이디 : 결정자, 고객이름 : 종속자, 등급 : 종속자

![image](https://github.com/user-attachments/assets/270ea24b-c187-4778-8870-b19fafe97642)

예: 학생수강성적 릴레이션

![image](https://github.com/user-attachments/assets/3422e30d-c93c-4a49-9a36-61395c18dcf9)

![image](https://github.com/user-attachments/assets/40d63d04-027b-45e7-8f01-dc34f421f8c6)

# 정규화
주어진 릴레이션 스키마가 잘못되어 이상현상이 발생하는 릴레이션 스키마를 (함수적 종속성 등의 종속이론을 이용하여) 분해하여, 이상 현상이 발생하지 않는 바람직한 릴레이션 스키마로 만들어 가는 과정

- 무손실 표현
  - 같은 의미의 정보 유지
  - 그러나 더 바람직한 구조
- 데이타의 중복성 감소
- 릴레이션 분해
  - 1개의 릴레이션을 여러 개의 릴레이션으로 표현
  - 릴레이션 각각에 대해 독립적 조작이 가능

## 릴레이션 분해 원칙
- 무손실 조인: 분해된 릴레이션을 다시 조인해도 데이터가 손실되지 않아야 함
- 종속성 유지: 원래 릴레이션의 함수 종속성이 분해된 릴레이션에도 유지되어야 함

# 정규형
